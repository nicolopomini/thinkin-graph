<!DOCTYPE html>
<html>
<head>
	  <link rel="stylesheet" href="https://openlayers.org/en/v5.3.0/css/ol.css" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
            integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script type="text/javascript" src="data.js"></script>
    <script src="map.js"></script>
    <style>
        .dot-track {
            height: 15px;
            width: 15px;
            border-radius: 50%;
            display: inline-block;
        }


        tbody {
            display:block;
            height:150px;
            /*overflow:scroll;*/
            overflow-x: hidden;
            overflow-y: auto;
        }
        thead, tbody tr {
            display:table;
            width:100%;
            table-layout:fixed;/* even columns width , fix width of table too*/
        }

        table {
            width:100%;
        }


        html {
            margin: 1em;
        }

        #tablesConfig {
            display: none;
        }
        .inputOutput {
          display: none;
        }
    </style>

</head>
<body onload="init()">
  <!--Single split Modal -->
    <div class="modal fade" id="splitModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Split shape</h4>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="segmentSize">Segment length (mm)</label>
                <div class="col-sm-10">
                  <input type="number" class="form-control" id="segmentSize" value="1000" min="0">
                </div>
              </div>
              <div class="form-group">
                <label for="segmentSpace">Space between segments (mm)</label>
                <div class="col-sm-10">
                  <input type="number" class="form-control" id="segmentSpace" value="0" min="0">
                </div>
              </div>
            </form>
            <input type="hidden" id="shapeIdModal">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" onclick="splitSingle()">Split</button>
          </div>
        </div>
      </div>
    </div>
  <!--All split Modal -->
    <div class="modal fade" id="splitAllModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Split all the shapes</h4>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="segmentSize">Segment length (mm)</label>
                <div class="col-sm-10">
                  <input type="number" class="form-control" id="allSegmentSize" value="1000" min="0">
                </div>
              </div>
              <div class="form-group">
                <label for="segmentSpace">Space between segments (mm)</label>
                <div class="col-sm-10">
                  <input type="number" class="form-control" id="allSegmentSpace" value="0" min="0">
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" onclick="splitAll()">Split all</button>
          </div>
        </div>
      </div>
    </div>
  <div  style="padding-top: 10px; padding-left: 10px">
      <div class="row">
      	<div class="col-xs-12 col-md-8">
          <button class="btn btn-default btn-lg active" id="drawButton" onclick="startDraw()">Draw</button>
          <button class="btn btn-default btn-lg" id="editButton" onclick="startEdit()">Edit shapes</button>
          <button class="btn btn-default btn-lg" id="editButton" onclick="showExport()">Export data <span class="caret"></button>
          <button class="btn btn-default btn-lg" id="editButton" onclick="showImport()">Import data <span class="caret"></button>
        </div>
        <div class="col-xs-6 col-md-4">
          <button class="btn btn-default btn-lg" id="undoButton" onclick="undo()" disabled>Undo</button>
        </div>
      </div>
      <div id="modeDisplay"></div>
  </div>

  <div style="padding-top: 30px;" display="none" id="exportDataDiv" class="inputOutput">
    <figure class="highlight">
      <pre>
        <code id="exportData"></code>
      </pre>
    </figure>
  </div>

  <div style="padding-top: 30px; visibility='hidden';" id="importDataDiv" class="inputOutput">
    <form>
      <div class="form-group">
        <label for="importData">Your JSON data representation</label>
        <textarea class="form-control" id="importData" rows="15"></textarea>
      </div>
      <button type="button" class="btn btn-default" onclick="importRawData()">Import</button>
    </form>
  </div>

  <div  style="padding-top: 30px;">
      <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
              <button id="showConfig" class="btn btn-warning" type="button" value="Configuration"
                      onclick="toggleVisible()">Configuration <span class="caret"></span></button>
          </div>
      </div>
  </div>

  <div id="tablesConfig">
      <div class="row" style="padding-top: 15px">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
              <h3>Nodes</h3>
              <table class="table table-striped table-hover table-bordered" id="tableNodes">
                  <thead>
                  <tr>
                      <th scope="col">Node ID</th>
                      <th scope="col">Node name</th>
                      <th scope="col">Node type</th>
                      <th scope="col">
                        <button type='submit' class='btn btn-default' onclick='applyAll()'>Apply All</button>
                        <button type='submit' class='btn btn-default' onclick='editAll()'>Edit All</button>
                        <button type='submit' class='btn btn-default' onclick='deleteAll()'>Delete All</button>
                        <button type='submit' class='btn btn-default' data-toggle="modal" data-target="#splitAllModal">Split All</button>
                      </th>
                  </tr>
                  </thead>
                  <tbody></tbody>
              </table>
          </div>
      </div>
  </div>
  <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <div id="maps"  style="padding-top: 15px"></div>
      </div>
  </div>
  </body>
</html>